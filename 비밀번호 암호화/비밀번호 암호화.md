# 🥔 Hash 
> 단방향 암호화 기법

해시함수(해시 알고리즘)을 이용하여 고정된 길이의 암호화 된 문자열로 바꿔버리는 것

단방향 해시 함수의 다이제스트(digest)로 사용자의 패스워드를 저장 

원본 메시지를 알면 암호화 된 메시지를 구하긴 쉽지만, 암호화 된 메시지로는 원본 메시지를 구할 수 없다 (_단방향성_)

### 다이제스트
→ 수학적인 연산을 통해 원본 메시지를 변환하여 암호화 한 메시지 

## 단방향 해시 함수의 보안 문제
### 인식 가능성
> 레인보우 공격 (rainbow attack)
- 동일한 메시지가 동일한 다이제스트를 갖는다면, 공격자가 전처리 된 다이제스트를 가능한 많이 확보한 다음 탈취한 다이제스트와 비교하여 원본 메시지를 찾아낼 가능성이 있다 
- 이와 같은 다이제스트 목록을 **레인보우 테이블(rainbow table)**이라고 한다 

### 속도
> 해시 함수의 빠른 처리 속도는 사용자보다 공격자에게 더 큰 편의성을 제공한다 

해시 함수 → 짧은 시간에 데이터를 검색하기 위해 설계된 것 

때문에 해시 함수의 빠른 처리로 공격자도 매우 빠른 속도로 임의의 문자열의 다이제스트와 해킹할 대상의 다이제스트를 비교할 수 있다 

## 단방향 해시 함수를 보완하기 위한 방법
### 솔팅(salting)
> $*$ **솔트(salt)**: 단방향 함수에서 다이제스트를 생성할 때 추가되는 바이트 단위의 임의의 문자열

원본 메시지에 문자열(salt)을 추가하여 다이제스트를 생성하는 것 

### 키 스트레칭(key stretching)
입력한 패스워스트의 다이제스트 생성 → 생성된 다이제스트를 입력값으로 하여 다이제스트 생성 → 이를 반복 

> → 입력한 패스워드를 동일한 횟수만큼 해시해야만입력한 패스워드의 일치 여부를 확인할 수 있다

### 솔팅과 키 스트레칭으로 구성된 암호화 시스템을 구현하려고 한다면 <u>이미 검증된 암호화 시스템</u>을 사용할 것을 권장한다 
> 많이 사용하는 function(라이브러리): PBKDF2, bcrypt, scrypt 등 

## 해시함수 (hash function)
임의의 길이 데이터를 고정된 길이의 데이터로 매핑하는 함수 
- key: 매핑 전 원래 데이터의 값
- hash value: 매핑 후 데이터의 값
- hashing: 매핑하는 과정 

## 해시 알고리즘 
- 종류가 다양하고 알고리즘마다 hash 길이가 다르다 
- 모두에게 공개되어 있다 = 해커에게도 공개
-  이미 보안이 뚫린 해시 함수도 존재 (사용 x): MD5, SHA-1,HAS-180

> SHA-256, SHA-512 등을 사용하기를 권고함 

## 단방향 암호화와 양방향 암호화 
단방향은 복호화 할 수 없고, 양방향은 복호화 할 수 있다 

대부분의 사이트는 비밀번호를 찾을 때 원래의 비밀번호를 알려주는 것이 아니라 **재설정**을 한다. 

패스워드를 복호화를 하는 순간 외부에 노출이 되기 때문에 단방향 암호화를 사용한다. (= 복호화를 할 이유가 없다!)

### 단방향 암호화 → Hash 알고리즘 사용 